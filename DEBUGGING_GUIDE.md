# 🛠️ 前端后端连接调试指南

## 🎯 问题现象
F12控制台显示前端没有调用后端代码

## 🔍 问题排查步骤

### 1. 检查服务状态
```bash
# 检查后端是否运行
curl http://127.0.0.1:8000/health

# 检查前端是否运行
curl http://localhost:5173
```

### 2. 使用调试页面
打开 `http://localhost:5173/debug.html` 进行自动化测试

### 3. 手动测试API
```bash
# 测试健康检查
curl -X GET http://127.0.0.1:8000/health

# 测试翻译API（需要音频文件）
curl -X POST http://127.0.0.1:8000/api/translate \
  -F "audio_chunk=@test.wav" \
  -F "source_lang=zh" \
  -F "target_lang=en"
```

## 🔧 已实施的修复

### 前端改进
1. **增强日志记录** - 添加详细的console.log输出
2. **改进错误处理** - 更友好的错误提示和分类
3. **CORS配置** - 确保支持跨域请求
4. **超时设置** - 添加请求超时机制

### 后端改进
1. **详细日志** - 记录每个请求的详细信息
2. **CORS中间件** - 启用credentials支持
3. **健康检查** - 提供服务状态检查端点

## 📊 调试信息位置

### 前端(F12控制台)
- 网络面板：查看实际的HTTP请求
- Console面板：查看JavaScript日志
- Sources面板：设置断点调试

### 后端(终端输出)
- 启动日志：服务启动信息
- 请求日志：每个API调用详情
- 错误日志：异常和错误信息

## 🚀 快速启动

```bash
# 方法1：使用启动脚本
./start_dev.sh

# 方法2：手动启动
# 后端
cd backend
python src/index.py

# 前端（新终端）
cd frontend  
npm run dev
```

## 🐛 常见问题及解决方案

### 问题1：CORS错误
**现象**：Console显示CORS相关错误
**解决**：确认后端CORS配置正确，检查前端请求headers

### 问题2：网络连接失败
**现象**：请求超时或连接拒绝
**解决**：确认后端服务正在运行，检查端口占用

### 问题3：音频格式不支持
**现象**：后端返回400错误
**解决**：检查前端音频录制配置，确认格式兼容

## 🔬 调试技巧

1. **逐步测试**：先测试健康检查，再测试翻译API
2. **对比测试**：使用调试页面和实际应用分别测试
3. **日志追踪**：从前端到后端全程跟踪请求流程
4. **环境隔离**：确保开发环境干净，无端口冲突

## 📈 预期行为

正常情况下你应该看到：
- F12 Console显示详细的请求/响应日志
- Network面板显示成功的HTTP请求
- 后端终端显示接收到的请求信息
- 页面显示翻译结果